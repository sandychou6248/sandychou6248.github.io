<!DOCTYPE HTML>
<!--
	Highlights by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>捐款系統</title>
		<link rel="icon" type="image/x-icon" href="../images/logo_.png" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Header -->
			<section id="header">
				<header class="major">
					<h1>捐款系統</h1>
					<p>註冊畫面(捐款者) <a href="http://html5up.net"></p>
				</header>
				<div class="container">
					<ul class="actions special">
						<li><a href="#two" class="button primary scrolly">Begin</a></li>
					</ul>
				</div>
			</section>

		
		<!-- Two -->
		<section id="two" class="main special">
			<div class="container">
			 <span class="image fit primary"><img src="images/3.png" alt="" /></span>
			 <div class="content">
			  <header class="major">
			   <h2>註冊系統後您就可以</h2>
			  </header>
			  <p>just do it</p>
			  <ul class="icons-grid">
			   <li>
				<span class="icon solid major fa-camera-retro"></span>
				<h3>安心捐款</h3>
			   </li>
			   <li>
				<span class="icon solid major fa-pencil-alt"></span>
				<h3>查詢金流</h3>
			   </li>
			   <li>
				<span class="icon solid major fa-code"></span>
				<h3>確認帳目</h3>
			   </li>
			   <li>
				<span class="icon solid major fa-coffee"></span>
				<h3>替這個世界盡一份心力</h3>
			   </li>
			  </ul>
			 </div>
			 <a href="#one" class="goto-next scrolly">Next</a>
			</div>
		   </section>
		   <!-- One -->
			<section id="one" class="main special">
				<div class="container">
					<span class="image fit primary"><img src="images/3.png" alt="" /></span>
					<div class="content">
						<header class="major">
							<h2>想捐款嗎？ 還不快來註冊！</h2>
						</header>
						<p>不管您是捐款者迫不及待想盡一份心力或是查詢金流?還是募款者想要查詢名單?抑或是受款人想要確認帳目?歡迎馬上註冊系統帶給世界一份美好!</p>
					</div>
					<a href="#footer" class="goto-next scrolly">Next</a>
				</div>
			</section>


		<!-- Footer -->
			<section id="footer">
				<div class="container">
					<header class="major">
						<h2>捐款人</h2>
					</header>
				
						<div class="row gtr-uniform">
							
							<label for="address">輸入帳號：</label>
							<div class="col-6 col-12-small">
								<input type="text" name="帳號" id="address" placeholder="EX:0x5FC953397D6060E157d718eC64822dCe1314eC44" />
							</div>
						
							<div class="row gtr-uniform">
							<label>  輸入密碼：</label>
							<div class="col-6 col-12-small">
								<input type="password" name="password" id="password" placeholder="password" />
							</div>
						    </div>
							<hr>
								<ul class="actions special">
									<li><button  class="primary" id="signUpDonor">註冊</button></li>
									
								</ul>
								
								<br>
							
								<ul class="actions special">
									<li><button><a href="三方註冊畫面.html">Back</a></button></li>
								</ul>
					
							</div>
					
						</div>
						
				
					
				</div>
				
				<footer>
					<ul class="icons">
						<li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
						<li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
						<li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
						<li><a href="#" class="icon brands alt fa-dribbble"><span class="label">Dribbble</span></a></li>
						<li><a href="#" class="icon solid alt fa-envelope"><span class="label">Email</span></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; Untitled</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li><li>Demo Images: <a href="http://unsplash.com">Unsplash</a></li>
					</ul>
				</footer>
			</section>

		<!-- Scripts -->
		
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
			<script src="合約.js"></script>

			<script>
				$("#signUpDonor").click(function () {
					var result1= infoContract.methods.donorList().call({ from: $("#address").val()});
					var result2=infoContract.methods.fundraiserList().call({ from: $("#address").val()});
					var result3 = infoContract.methods.payeeList().call({ from: $("#address").val()});
					result1.then(function(donor){				
						for(var i=0;i<donor.length;i++){
							if( $("#address").val() == donor[i]){							
								alert("註冊失敗!你已註冊過:捐款人");
								break;
							}
							else if($("#address").val() != donor[i] && i==donor.length-1 ){
								result2.then(function(fundraiser){				
									for(var i=0;i<fundraiser.length;i++){
										if( $("#address").val() == fundraiser[i]){							
											alert("註冊失敗!你已註冊過:慈善機構");											
											break;
										}	
										else if($("#address").val() != fundraiser[i] && i==fundraiser.length-1){
											result3.then(function(payee){				
												for(var i=0;i<payee.length;i++){
													if( $("#address").val() == payee[i]){							
														alert("註冊失敗!你已註冊過:商家");
														break;																
													}	
													else if($("#address").val() != payee[i] && i==payee.length-1){
														var result=infoContract.methods.signUpDonor($("#password").val()).send({ from: $("#address").val() , gas:500000 });
														result.then(function(){
															alert("註冊成功!");
														})
													}												
												}
											})
										}						
									}
								})
							}
						}
					})					

				})

			
			</script>
	</body>
</html>
